Recently, there has been a significant escalation in both academic and industrial commitment towards the development of autonomous driving systems (ADSs). A number of simulation testing approaches have been proposed to generate diverse driving scenarios for ADS testing. However, scenarios generated by these previous approaches are static and lack interactions between the EGO vehicle and the NPC vehicles, resulting in a large amount of time on average to find violation scenarios. Besides, a large number of the violations they found are caused by aggressive behaviors of NPC vehicles, revealing none bugs of ADS. 

In this work, we propose the concept of adversarial NPC vehicles and introduce AdvFuzz, a novel simulation testing approach, to generate adversarial scenarios on main lanes (e.g., urban roads and highways). AdvFuzz allows NPC vehicles to dynamically interact with the EGO vehicle and regulates the behaviors of NPC vehicles, finding more violation scenarios caused by the EGO vehicle more quickly. We compare AdvFuzz with a random approach and three state-of-the-art scenario-based testing approaches. Our experiments demonstrate that AdvFuzz can generate 198.34\% more violation scenarios compared to the other four approaches in 12 hours and increase the proportion of violations caused by the EGO vehicle to 87.04\%, which is more than 7 times that of other approaches. Additionally, AdvFuzz is at least 51.98\% faster in finding one violation scenario, 92.21\% faster in finding one violation caused by the EGO vehicle, 58.32\% faster in finding the first violation and 82.60\% faster in finding the first violation caused by the EGO vehicle than those of the other approaches.

## Overview
![](/img/Overview_01.png)

## Examples of Generated Scenarios
Here are some dynamically generated scenarios using AdvFuzz, showcasing how the EGO vehicle interacts with adversarial NPC vehicles:
<table>
  <tr>
    <td>
      <img src="img/record1.gif" alt="Caused by Ego" style="width: 100%;" />
      <p align="center">EGO fails to plan trajectory</p>
    </td>
    <td>
      <img src="img/apollo_npc.gif" alt="Caused by NPC" style="width: 100%;" />
      <p align="center">Caused by NPC (AV-Fuzzer)</p>
    </td>
  </tr>
  <tr>
    <td>
      <img src="img/drivefuzz_ego.gif" alt="Caused by ADS" style="width: 100%;" />
      <p align="center">Caused by Ego (DriveFuzz)</p>
    </td>
    <td>
      <img src="img/drivefuzz_npc.gif" alt="Caused by NPC" style="width: 100%;" />
      <p align="center">Caused by NPC (DriveFuzz)</p>
    </td>
  </tr>
</table>

